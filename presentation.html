<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Tools to generate and check consistency of model
      classes for Java PathFinder
    </title>
    <meta autho="Matteo Ceccarello" />
    <meta 
      name="viewport" 
      content="width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=no" />

    <link href='fonts.css' rel='stylesheet' type='text/css'>
    
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jmpress.js"></script>
  </head>

  <body>
  <div id="jmpress">

    <section id='title' data-template='title'>
    <h1>
      Tools to generate and check consistency of model 
      classes for Java Pathfinder
    </h1>
    </section>

    <section id='introduction' data-template='introduction'>
    <h2><center>Introduction</center></h2>
      <section>
      <h3>Context</h3>
        <p>
          Java applications leverage the JDK and third party libraries
          to simplify software development.
        </p>
      </section>

      <section align='right'>
      <h3 align='right'>JPF Approach</h3>
        <p align='right'>
          To mitigate the state space explosion problem and handle native
          methods, JPF uses so called model classes.
        </p>
      </section>

      <section>
      <h3>Developer problem</h3>
        <p>Writing model classes is time consuming and error prone. </p>
      </section>
    </section>

    <section id="model-generator" data-template="model-generator">
      <h2>Model Generator</h2>
      <div id="model-generator-purpose">
        <p>Generates models automatically, starting from a System Under Test.</p>
      </div>

      <section>
        <h3>How it works</h3>
        <p>
        <ul>
          <li> The SUT's bytecode is parsed, looking for method invocations and
               field accesses.
          <li> A graph data structure is populated with information regarding
               the needed interfaces, classes and methods.
          <li> The code for model classes is generated by traversing the data 
               structure.
        </ul>
        </p>
      </section>

      <section>
        <h3>Example</h3>
      </section>

      <section>
        <h3>Configuration</h3>
        <p>
          Itâ€™s configured through *.jpf files and command line
          <ul>
            <li> Classes to exclude and include in the generation
            <li> Paths to the classes and jars of the SUT
          </ul>
        </p>
        <section>
          <h4>Example</h4>
<pre><code>model-generator.baseDir = models
model-generator.excludes = java.util.*.*
model-generator.includes = java.util.LinkedList.*,\
java.util.List.*
bin/genmodel configFile.jpf SampleSUT.jar</code></pre>            
        </section>
      </section>

    </section>

    <section id="conformance-checker" data-template="conformance-checker">
      <h2>Conformance Checker</h2>
      <div id="conformance-checker-purpose">
        <p>Checks if already existent model classes are consistent with
        their library counterparts.</p>
      </div>
       
      <section>
        <h3>How it works</h3>
        <img src='uml.png' />
      </section>

      <section>
        <h3>Configuration</h3>
          <p>
          Configuration is done in *.jpf files.
          <ul>
            <li> Paths to JDK standard library versions and third party libraries
            <li> Paths to the model classes
            <li> Checkers and reporters to use
            <li> Output format
            <li> Classes to check        
          </ul>
          </p>
      </section>

      <section>
      <h3>Sample output: <code>java.lang.System</code></h3>
      <!--
<table>
<tr><th>Java version</th><th>Inconsistency type</th><th>Member name</th><th>Description</th></tr>
<tr><td>7</td><td>MISSING_METHOD</td><td><code>public static java.io.Console console()</code></td><td>This method is present in the library version but missing in the model.</td></tr>
<tr><td>7</td><td>MISSING_METHOD</td><td><code>public static java.lang.String lineSeparator()</code></td><td>This method is present in the library version but missing in the model.</td></tr>
<tr><td>N/A</td><td>ORPHAN_NATIVE_PEER</td><td><code>public static native void runFinalization()</code></td><td>The native peer is missing for this method.</td></tr>
<tr><td>N/A</td><td>ORPHAN_NATIVE_PEER</td><td><code>public static native void runFinalizersOnExit(boolean)</code></td><td>The native peer is missing for this method.</td></tr>
<tr><td>N/A</td><td>ORPHAN_NATIVE_PEER</td><td><code>static native java.lang.Class getCallerClass()</code></td><td>The native peer is missing for this method.</td></tr>
<tr><td>7</td><td>INCONSISTENT_MODIFIERS</td><td><code>public static java.io.InputStream in</code></td><td>The library version is: public static final</td></tr>
<tr><td>7</td><td>INCONSISTENT_MODIFIERS</td><td><code>public static java.io.PrintStream err</code></td><td>The library version is: public static final</td></tr>
<tr><td>7</td><td>INCONSISTENT_MODIFIERS</td><td><code>public static java.io.PrintStream out</code></td><td>The library version is: public static final</td></tr>
<tr><td>7</td><td>INCONSISTENT_CLASS_STATE</td><td><code>private static volatile java.io.Console cons</code></td><td>This field is present in the library version of the class but not in the model.</td></tr>
<tr><td>7</td><td>INCONSISTENT_CLASS_STATE</td><td><code>private static volatile java.lang.SecurityManager security</code></td><td>This field is present in the library version of the class but not in the model.</td></tr>
<tr><td>7</td><td>INCONSISTENT_CLASS_STATE</td><td><code>private static java.lang.String lineSeparator</code></td><td>This field is present in the library version of the class but not in the model.</td></tr>
<tr><td>7</td><td>INCONSISTENT_CLASS_STATE</td><td><code>private static java.util.Properties props</code></td><td>This field is present in the library version of the class but not in the model.</td></tr>
<tr><td>7</td><td>INCONSISTENT_CLASS_STATE</td><td><code>static java.lang.SecurityManager securityManager</code></td><td>This field is present in the model class but not in the library version.</td></tr>
<tr><td>7</td><td>INCONSISTENT_CLASS_STATE</td><td><code>static java.util.Properties properties</code></td><td>This field is present in the model class but not in the library version.</td></tr>
</table>
-->
      </section>

    </section>
    
    <section id="dynamic-generator" data-template='dynamic-generator'>
      <h2>Dynamic Generator</h2>
      <div id="dynamic-generator-purpose">
        <p>Sometimes a model is missing some members at runtime.</p>
        <p>This tool enables dynamic generation of missing members.</p>
      </div>
      
      <section>
        <h3>How it works</h3>
        <ul>
          <li> When a model class is loaded a check is performed, looking
               for missing members, with respect to the library version.
          <li> For each missing member, the appropriate bytecode is generated
               and inserted into the <code>ClassInfo</code> object.
         </ul>
      </section>

      <section>
        <h3>Configuration</h3>
        <p>Again through <code>*.jpf</code> files:</p>
        <ul>
          <li> Paths to original libraries
          <li> Paths to model classes
          <li> JPF listener property
        </ul>
        
      </section>

    </section>

    <section id="overview" z-index='-1' data-template="overview">
    
    </section>

  </div>

  <script type="text/javascript">

    // TEMPLATES

    $.jmpress('template', 'title', {
      x: 0, y: 0
    });

    $.jmpress('template', 'introduction', {
      x: 0, y: 500,
      children: [
        {x: -200, y:200, scale: 0.7},
        {x: 200, y:400, scale: 0.7},
        {x: -200, y:600, scale: 0.7}
      ]
    });

    $.jmpress('template', 'model-generator', {
      x: 1000, y: -200,
      children: function(idx, current_child, children) {
          return {
            x: 700,
            y: idx*200-200,
            scale: 0.5,
            children: function(i, cc, cs) { return {z: -100, scale: 0.2}}
          }
      }
      /*children: [
        {x: 500, y: -300, scale: 0.5}, // how it works
        {x: 1000, y: 0, scale: 0.5},   // example
        {x: 500, y: 300, scale: 0.5,   // configuration
         children: [
          {z: -100, scale: 0.2}
         ] 
        }
      ]*/
      });

    $.jmpress('template', 'conformance-checker', {
      x:1000, y: 600,
      children: function(idx, current_child, children) {
          return {
            x: 700,
            y: idx*200 - 200,
            scale: 0.5
          }
      }
    });

    $.jmpress('template', 'dynamic-generator', {
      x:1000, y:1300,
      children: function(idx, current_child, children) {
          return {
            x: 700,
            y: idx*200 - 100,
            scale: 0.5
          }
      }
    });

    $.jmpress('template', 'overview', {
      x: 800, y:500, scale: 4
    });

    // CONFIGURATION
    $('#jmpress').jmpress({
      stepSelector: 'section'
    });

    // ACTIVATION
    $(function() {
        $('jmpress').jmpress();
    });
  </script>
  </body>

</html>
